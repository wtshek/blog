---
import { getLangFromUrl } from '../i18n';
import SocialLinks from './SocialLinks.astro';

const today = new Date();
const lang = getLangFromUrl(Astro.url);
---

<footer class="relative mt-20 overflow-hidden bg-black text-white">
  <div class="container mx-auto max-w-screen-xl px-4">
    <div class="py-20 pb-10">
      <div class="grid grid-cols-1 items-center gap-20 md:grid-cols-2">
        <div
          class="flex flex-col items-center gap-10 md:flex-row md:items-center md:gap-10"
        >
          <div class="geometric-logo relative h-16 w-16 flex-shrink-0">
            <div
              class="logo-shape red absolute left-0 top-0 h-10 w-10 rotate-45 transform bg-red-600 transition-all duration-300"
            >
            </div>
            <div
              class="logo-shape blue absolute bottom-0 right-0 h-5 w-5 rounded-full bg-blue-600 transition-all duration-300"
            >
            </div>
            <div
              class="logo-shape yellow absolute right-5 top-1/2 h-7 w-3 -translate-y-1/2 transform bg-yellow-400 transition-all duration-300"
            >
            </div>
          </div>
          <p
            class="m-0 text-center text-sm font-normal opacity-80 md:text-left"
          >
            &copy; {today.getFullYear()} Wing Tung Shek. All rights reserved.
          </p>
        </div>

        <div class="text-center md:text-right">
          <h3 class="mb-5 text-2xl font-extrabold uppercase text-white">
            Connect
          </h3>
          <div class="flex flex-wrap justify-center gap-5 md:justify-end">
            <SocialLinks variant="footer" />
          </div>
        </div>
      </div>
    </div>

    <div class="flex items-center gap-5 justify-center md:justify-end">
      <div
        class="flex items-center gap-5 text-nowrap text-sm font-bold uppercase"
      >
        <a
          href="/"
          class={`px-2 py-1 border-2 border-transparent transition-all duration-300 hover:border-black hover:bg-yellow-400 ${lang === 'en' ? 'text-white bg-red-600 border-black' : 'text-white'}`}
        >
          EN
        </a>
        <span class="font-light text-white"> | </span>
        <a
          href="/zh-TW"
          class={`px-2 py-1 border-2 border-transparent transition-all duration-300 hover:border-black hover:bg-yellow-400 ${lang === 'zh-TW' ? 'text-white bg-red-600 border-black' : 'text-white'}`}
        >
          中文
        </a>
      </div>
    </div>

    <div class="mt-10 flex h-5">
      <div
        class="accent-block red flex-1 bg-red-600 transition-all duration-300 hover:flex-grow-[2]"
      >
      </div>
      <div
        class="accent-block blue flex-1 bg-blue-600 transition-all duration-300 hover:flex-grow-[2]"
      >
      </div>
      <div
        class="accent-block yellow flex-1 bg-yellow-400 transition-all duration-300 hover:flex-grow-[2]"
      >
      </div>
    </div>
  </div>
</footer>

<style>
  /* Keep complex animations and pseudo-elements that can't be easily replicated with Tailwind */
  .geometric-logo:hover .logo-shape {
    transform: scale(1.1) rotate(45deg);
  }

  .geometric-logo:hover .logo-shape.blue {
    transform: scale(1.1);
    border-radius: 0;
  }

  .geometric-logo:hover .logo-shape.yellow {
    transform: translateY(-50%) scale(1.1);
  }

  .social-link::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    right: -3px;
    bottom: -3px;
    z-index: -1;
    transition: all 0.3s ease;
    opacity: 0;
  }

  .social-link:hover::after {
    opacity: 1;
  }

  .social-link:nth-child(1)::after {
    background: #ff0000;
  }

  .social-link:nth-child(2)::after {
    background: #0066cc;
  }

  .social-link:nth-child(3)::after {
    background: #ffcc00;
  }
</style>
